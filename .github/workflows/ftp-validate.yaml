name: Validar par√°metros FTP

on:
  workflow_dispatch: # Se ejecuta manualmente desde la pesta√±a Actions

jobs:
  validate-ftp:
    runs-on: ubuntu-latest

    steps:
      - name: Mostrar par√°metros configurados
        run: |
          echo "Servidor: ${{ secrets.FTP_SERVER }}"
          echo "Usuario: ${{ secrets.FTP_USERNAME }}"
          echo "Puerto: ${{ secrets.FTP_PORT }}"
          # ‚ö†Ô∏è Nunca mostramos la contrase√±a en logs por seguridad

      - name: Crear archivo de prueba
        run: echo "Validaci√≥n de conexi√≥n FTP üöÄ" > ftp-validate.txt

      - name: Listar archivos locales
        run: ls -la

      - name: Validar conexi√≥n y subir archivo de prueba
        uses: SamKirkland/FTP-Deploy-Action@v4.3.3
        with:
          server: ${{ secrets.FTP_SERVER }}
          username: ${{ secrets.FTP_USERNAME }}
          password: ${{ secrets.FTP_PASSWORD }}
          port: ${{ secrets.FTP_PORT }}
          protocol: ftps
          local-dir: ./
          server-dir: proaudit.custom-enfield.com/ # ‚úÖ Ajusta seg√∫n tu subdominio
          exclude: |
            *
            !ftp-validate.txt
          log-level: verbose